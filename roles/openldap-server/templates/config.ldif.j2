# example config file - global configuration entry
dn: cn=config
objectClass: olcGlobal
cn: config
olcArgsFile: /var/run/slapd/slapd.args
olcPidFile: /var/run/slapd/slapd.pid
olcLogLevel: stats
olcTLSCertificateFile: {{ openldap_server_cert }}
olcTLSCertificateKeyFile: {{ openldap_server_private_key }}
olcSecurity: tls=1

# modules that can be loaded
dn: cn=module{0},cn=config
objectClass: olcModuleList
cn: module{0}
olcModulePath: /usr/lib/ldap
olcModuleLoad: back_bdb.la

# internal schema
dn: cn=schema,cn=config
objectClass: olcSchemaConfig
cn: schema

# include the core schemata
include: file:///etc/ldap/schema/core.ldif
include: file:///etc/ldap/schema/cosine.ldif
include: file:///etc/ldap/schema/inetorgperson.ldif
include: file:///etc/ldap/schema/nis.ldif

# add database
dn: olcDatabase=bdb,cn=config
objectClass: olcDatabaseConfig
objectClass: olcBdbConfig
olcDatabase: bdb
olcSuffix: {{ openldap_path }}
olcDbDirectory: /var/lib/ldap/{{ openldap_server_domain_name }}/
olcRootDN: {{ openldap_superuser_dn }}
olcRootPW: {{ root_password.stdout }}
olcDbIndex: objectClass pres,eq
olcDbIndex: ou,cn,mail,surname,givenname pres,eq,sub
olcDbIndex: uidNumber,gidNumber,loginShell pres,eq
olcDbIndex: uid,memberUid pres,eq,sub
olcDbIndex: nisMapName,nisMapEntry pres,eq,sub

