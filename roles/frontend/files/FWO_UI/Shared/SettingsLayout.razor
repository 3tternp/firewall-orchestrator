@using FWO.Ui.Data

@inherits LayoutComponentBase
@layout MainLayout

<div class="sidebar-main d-flex flex-row navbar-dark bg-dark" style="left: 0px;">
    <div style="z-index:3; width:@($"{sidebarWidth}px"); overflow-x:auto;">
        <div class="m-2">
            <ul class="navbar-nav flex-column">
                @foreach (NavItem navItem in navItems)
                {
                    <AuthorizeView Roles="Admin">
                        <Authorized>
                            <p>Only admins can see this</p>
                        </Authorized>
                    </AuthorizeView>

                    <li class="nav-item px-2">
                        <NavLink class="nav-link" href="@navItem.Link">
                            @navItem.Name <span class="@navItem.Symbol"></span>
                        </NavLink>
                    </li>
                }
            </ul>
        </div>
    </div>
    <div class="sidebar-sizer" draggable="false"></div>
</div>

<div style="margin-left: @($"{sidebarWidth + 20}px");">
    @Body
</div>

@code
{
    private const int sidebarWidth = 200;

    private NavItem[] navItems;

    protected override void OnInitialized()
    {
        navItems = new NavItem[]
        {
            new NavItem(() => "Managements", "settings/managements", "oi oi-inbox"),
            new NavItem(() => "Authorization", "settings/authorization", "oi oi-lock-locked")
        };
    }
}

