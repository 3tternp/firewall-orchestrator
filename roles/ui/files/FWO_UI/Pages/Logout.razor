@using Microsoft.AspNetCore.Components.Server.ProtectedBrowserStorage
@using FWO.Ui.Auth;

@inject ProtectedSessionStorage sessionStorage
@inject AuthenticationStateProvider AuthService
@inject NavigationManager NavigationManager

@page "/logout"

<h3>Logout</h3>

@code
{
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await sessionStorage.DeleteAsync("jwt");

        ((AuthStateProvider)AuthService).Deauthenticate();

        NavigationManager.NavigateTo("");
    }
}
